{"version":3,"file":"async-local-storage_module.js","sourceRoot":"","sources":["../../src/async-local-storage_module.ts"],"names":[],"mappings":"OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe;OAEjC,EAAE,iBAAiB,EAAE,MAAM,uBAAuB;OAClD,EAAsB,iBAAiB,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,MAAM,mBAAmB;AAElH;IAEI,IAAI,QAA4B,CAAC;IAEjC,IAAI,CAAC;QAED,2CAA2C;QAC3C,QAAQ,GAAG,IAAI,iBAAiB,EAAE,CAAC;IAEvC,CAAE;IAAA,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QAEb,IAAI,CAAC;YAED,iDAAiD;YACjD,QAAQ,GAAG,IAAI,oBAAoB,EAAE,CAAC;QAE1C,CAAE;QAAA,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAEb,yDAAyD;YACzD,QAAQ,GAAG,IAAI,iBAAiB,EAAE,CAAC;QAEvC,CAAC;IAEL,CAAC;IAED,MAAM,CAAC,IAAI,iBAAiB,CAAC,QAAQ,CAAC,CAAC;AAE3C,CAAC;AAAA,CAAC;AAGF;IAAA;IAaA,CAAC;IAb4C,kCAAU,GAA0B;QACjF,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;oBACrB,SAAS,EAAE;wBACP;4BACI,OAAO,EAAE,iBAAiB;4BAC1B,UAAU,EAAE,wBAAwB;yBACvC;qBACJ;iBACJ,EAAG,EAAE;KACL,CAAC;IACF,kBAAkB;IACX,sCAAc,GAA6D,EACjF,CAAC;IACF,8BAAC;AAAD,CAAC,AAbD,IAaC","sourcesContent":["import { NgModule } from '@angular/core';\n\nimport { AsyncLocalStorage } from './async-local-storage';\nimport { AsyncLocalDatabase, IndexedDBDatabase, LocalStorageDatabase, MockLocalDatabase } from './databases/index';\n\nexport function asyncLocalStorageFactory() {\n\n    let database: AsyncLocalDatabase;\n\n    try {\n\n        /* Try with IndexedDB in modern browsers */\n        database = new IndexedDBDatabase();\n\n    } catch (error) {\n\n        try {\n\n            /* Try with localStorage in old browsers (IE9) */\n            database = new LocalStorageDatabase();\n\n        } catch (error) {\n\n            /* Fake database for server-side rendering (Universal) */\n            database = new MockLocalDatabase();\n\n        }\n        \n    }\n\n    return new AsyncLocalStorage(database);\n\n};\n\n\nexport class AsyncLocalStorageModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    providers: [\n        {\n            provide: AsyncLocalStorage, \n            useFactory: asyncLocalStorageFactory\n        }\n    ]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: ({type: any, decorators?: DecoratorInvocation[]}|null)[] = [\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}